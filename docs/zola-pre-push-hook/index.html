<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon"  href="https://wonkodv.github.io/favicon.png">
        <link rel="stylesheet" type="text/css" href="https://wonkodv.github.io/style.css">
        
        <link rel="canonical" type="text/css" href="https:&#x2F;&#x2F;wonkodv.github.io&#x2F;zola-pre-push-hook&#x2F;">
        

        
        <link rel="alternate" type="application/atom+xml" title="RSS" href="https://wonkodv.github.io/atom.xml">
        

        
    <title> Zola pre-push hook - Zettelkasten</title>
    <link rel="prev" href="https:&#x2F;&#x2F;wonkodv.github.io&#x2F;minimal-bash-prompt&#x2F;" />
    <link rel="next" href="https:&#x2F;&#x2F;wonkodv.github.io&#x2F;neovim-remote-as-git-diff-tool&#x2F;" />
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": "Zola pre-push hook",
        "alternativeHeadline": "A pre-push hook to build zola",
        
        "datePublished": "2022-11-21",
        

        "keywords": [
        
            "git",  
        
            "zola"
        
        ],
        "articleSection": "Using Unix"
    }
    </script>

    <meta property="og:title" content="Zola pre-push hook">
    <meta property="og:site_name" content="Zettelkasten">
    <meta property="og:url" content="https://wonkodv.github.io/zola-pre-push-hook/">
    <meta name="description" content="A pre-push hook to build zola">
    <meta name="og:description" content="A pre-push hook to build zola">

        
    </head>

    <body>
        
        <header>
            <div class="big"><a href="https:&#x2F;&#x2F;wonkodv.github.io&#x2F;" title="Home">Zettelkasten</a></div>
            Wonko&#x27;s collection of notes
            <nav>
                <a href="https://wonkodv.github.io/first/">About</a>
                     &middot;
                
                <a href="https:&#x2F;&#x2F;wonkodv.github.io&#x2F;category&#x2F;">Categories</a>
                     &middot;
                
                <a href="https:&#x2F;&#x2F;wonkodv.github.io&#x2F;tags&#x2F;">Tags</a>

                
                
            </nav>

        </header>
        

        <main>
            

<article>

    <p class="date">
    Posted on <time datetime="2022-11-21T00:00:00+00:00">2022-11-21</time>
    in 
    
        <a href="https://wonkodv.github.io/category/using-unix/">Using Unix</a>,
    tagged with 
    
        <a href="https://wonkodv.github.io/tags/git/" rel="tag">git</a>, 
    
        <a href="https://wonkodv.github.io/tags/zola/" rel="tag">zola</a>
    

    
    </p>

    <h1 id="zola-pre-push-hook">Zola pre-push hook</h1>
<p>I commit the generated site files into my blog's repo because that is the easiest way to get github to host it for me.
In order to not forget to build, I wanted a hook that reminds me before I push.</p>
<p>Running <code>zola build</code> alone isn't enough, as it doesn't give an error return code or modify one of the files to be pushed.
<code>git diff</code> doesn't normally have a return code to indicate if there are diffs, but <code>git diff --quiet</code> does.
Combining both will build and then fail, if anything in <code>docs/</code> isn't added or committed.</p>
<pre data-lang="bash" style="background-color:#fdf6e3;color:#657b83;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#b58900;">zola</span><span> build </span><span style="color:#859900;">&amp;&amp; </span><span style="color:#b58900;">git</span><span> diff</span><span style="color:#268bd2;"> --quiet</span><span> docs/
</span></code></pre>
<p>To include this in a <a rel="noopener" target="_blank" href="https://pre-commit.com">pre-commit</a> config, wrap it in <code>bash -c</code> and use as a system hook.
Check out me <a rel="noopener" target="_blank" href="https://github.com/wonkodv/wonkodv.github.io/blob/main/.pre-commit-config.yaml">.pre-commit-config.yaml</a>.</p>


</article>

        </main>

        
        <footer>
            <nav>
                
    <a style="float:left;" href="https:&#x2F;&#x2F;wonkodv.github.io&#x2F;minimal-bash-prompt&#x2F;" rel="prev"> Older Post</a>

    <a style="float:right;" href="https:&#x2F;&#x2F;wonkodv.github.io&#x2F;neovim-remote-as-git-diff-tool&#x2F;" rel="next"> Newer Post</a>


                <a href="https://github.com/wonkodv">Github</a>
                    &middot;
                
                <a href="https://github.com/wonkodv/wonkodv.github.io/blob/main/content/zola-pre-push-hook.md">Source</a> /
                <a href="https://github.com/wonkodv/wonkodv.github.io/edit/main/content/zola-pre-push-hook.md">Change</a>
                    &middot;
                    <a href="https://github.com/wonkodv/wonkodv.github.io/discussions/new?category=general&title=About%20%22Zola%20pre-push%20hook%22&body=%0A%0A%0A%0A%0A%3C%21--%20please%20keep%20this%20footer%20--%3E%0A-----%0ALink%20to%20Post%0a%3Chttps%3A&#x2F;&#x2F;wonkodv.github.io&#x2F;zola-pre-push-hook&#x2F;%3E">Discuss</a>
                
            </nav>
        </footer>
        
    </body>
</html>

